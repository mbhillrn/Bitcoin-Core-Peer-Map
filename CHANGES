UI improvement and bug fixes.
